<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>360° Walkthrough</title>
    
    <!-- 
    INSTRUCTIONS:
    1. Place your 360° images in the ./Data/ folder (or change IMAGE_DIR below)
    2. Images should be named "Step 1.jpg", "Step 2.jpg", etc.
    3. If using .png images, change EXT = ".png" in the config below
    4. Run a local server: python3 -m http.server
    5. Open http://localhost:8000 in your browser
    -->
    
    <!-- Google Fonts - Manrope -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    
    <!-- A-Frame CDN -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
</head>
<body>
    <!-- Page Title -->
    <div class="page-title">Boomerang Sports Club, 128</div>
    <div class="pan-instruction">Click and drag to pan</div>
    
    <!-- Export Button -->
    <button class="export-button" id="export-button">
        <img src="data/icons/Export%20Icon.png" alt="Export" class="export-icon">
    </button>
    
    <!-- A-Frame Scene -->
    <a-scene renderer="antialias: true; colorManagement: true; sortObjects: true; physicallyCorrectLights: true; preserveDrawingBuffer: true;" screenshot="width: 1920; height: 1080;">
        <!-- Camera with device orientation support -->
        <a-camera 
            look-controls="touchEnabled: true; magicWindowTrackingEnabled: true"
            position="0 0 0"
            cursor="rayOrigin: mouse">
        </a-camera>
        
        <!-- 360° Image Sky -->
        <a-sky id="sky-image" src="" rotation="0 -90 0" crossorigin="anonymous"></a-sky>
        
        <!-- Comment Pins Container -->
        <a-entity id="comment-pins"></a-entity>
    </a-scene>
    
    <!-- Navigation UI -->
    <div class="nav-ui">
        <button id="prev-btn" class="nav-button" aria-label="Previous step">
            <img src="data/icons/left_arrow.svg" alt="Previous" class="arrow-icon">
        </button>
        <div class="step-indicator" id="step-indicator">Step 1/18</div>
        <button id="next-btn" class="nav-button" aria-label="Next step">
            <img src="data/icons/right_arrow.svg" alt="Next" class="arrow-icon">
        </button>
    </div>
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="spinner"></div>
    </div>
    
    <!-- Welcome Instruction Overlay -->
    <div class="welcome-overlay" id="welcome-overlay">
        <div class="welcome-content">
            <div class="welcome-icon">
                <img src="data/icons/click_drag_icon.png" alt="Click and drag" class="welcome-icon-img">
            </div>
            <h2 class="welcome-text">Click and drag to pan in 360°</h2>
            <p class="welcome-hint">Click anywhere to dismiss</p>
        </div>
    </div>
    
    <!-- Connection Error Overlay -->
    <div class="connection-error-overlay" id="connection-error-overlay">
        <div class="connection-error-content">
            <div class="connection-error-icon">⚠️</div>
            <h2 class="connection-error-title">Connection Issue</h2>
            <p class="connection-error-text">Unable to load this step. Please check your internet connection for the best experience.</p>
            <button class="connection-error-retry" id="connection-error-retry">Retry</button>
        </div>
    </div>
    
    <!-- Zoom Controls -->
    <div class="zoom-controls">
        <button class="zoom-button" id="zoom-in">+</button>
        <div class="zoom-level" id="zoom-level">100%</div>
        <button class="zoom-button" id="zoom-out">−</button>
    </div>
    
    <!-- Date and Time -->
    <div class="date-time">25th Aug, 3:15 PM</div>
    
    <!-- Mini-map Navigation -->
    <div class="minimap-container" id="minimap-container">
        <div class="minimap-title">
            <select class="floor-dropdown" id="floor-dropdown">
                <option value="ground">Ground Floor</option>
                <option value="3rd" selected>3rd Floor</option>
                <option value="roof">Roof</option>
            </select>
        </div>
        <button class="minimap-toggle" id="minimap-toggle">−</button>
        <div class="minimap-instructions">*Click on blue dots to jump steps</div>
        <img class="minimap-bg" src="data/floorplans/floor_3_plan.png" alt="Map background">
        <div class="minimap-svg" id="minimap-svg"></div>
    </div>
    
    <!-- Comment Tooltip -->
    <div class="comment-tooltip-2d" id="comment-tooltip-2d">
        Debris Uncleared
    </div>
    
    <!-- Comment Popup -->
    <div class="comment-overlay" id="comment-overlay"></div>
    <div class="comment-popup" id="comment-popup">
        <div class="comment-risk-badge" id="comment-risk-badge">NORMAL RISK</div>
        <button class="comment-close" id="comment-close">×</button>
        <h3 class="comment-title" id="comment-title">Comment Title</h3>
        <p class="comment-description" id="comment-description">Comment description goes here.</p>
    </div>
    
    <!-- Main JavaScript -->
    <script src="main.js"></script>
</body>
</html>
